# ä¿¡ä»»åˆ†æ•¸ç³»çµ±ï¼ˆTrust Score Systemï¼‰

**å¯¦ä½œæ—¥æœŸ**: 2025-12-14
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**ç‰ˆæœ¬**: 1.0.0

---

## ğŸ“‹ ç³»çµ±æ¦‚è¿°

ä¿¡ä»»åˆ†æ•¸ç³»çµ±æ˜¯ MergeMeet å¹³å°çš„ä¿¡è­½ç®¡ç†æ©Ÿåˆ¶ï¼Œé€éè‡ªå‹•è¿½è¹¤ç”¨æˆ¶è¡Œç‚ºä¾†ç¶­è­·å¹³å°å¥åº·åº¦èˆ‡å®‰å…¨æ€§ã€‚

### æ ¸å¿ƒç›®æ¨™

1. **çå‹µæ­£å‘è¡Œç‚º** - é¼“å‹µç”¨æˆ¶å®Œæˆé©—è­‰ã€ç©æ¥µäº’å‹•
2. **æ‡²ç½°è² å‘è¡Œç‚º** - éåˆ¶é•è¦ã€é¨·æ“¾ã€è©é¨™ç­‰ä¸ç•¶è¡Œç‚º
3. **å„ªåŒ–é…å°å“è³ª** - å„ªå…ˆæ¨è–¦é«˜ä¿¡ä»»åº¦ç”¨æˆ¶
4. **è‡ªå‹•åŠŸèƒ½é™åˆ¶** - é™åˆ¶ä½ä¿¡ä»»ç”¨æˆ¶çš„ç ´å£è¡Œç‚º

---

## ğŸ¯ åˆ†æ•¸ç³»çµ±è¨­è¨ˆ

### åˆ†æ•¸ç¯„åœ

| åˆ†æ•¸ç¯„åœ | ç‹€æ…‹ | èªªæ˜ |
|----------|------|------|
| 70-100 | é«˜åº¦ä¿¡ä»» | é…å°æ’åºå„ªå…ˆï¼Œç„¡é™åˆ¶ |
| 50-69 | æ­£å¸¸ | æ–°ç”¨æˆ¶é è¨­å€¼ï¼Œæ­£å¸¸ä½¿ç”¨ |
| 30-49 | éœ€é—œæ³¨ | é…å°æ’åºç•¥é™ï¼Œå»ºè­°æ”¹å–„è¡Œç‚º |
| 20-29 | å—é™ | é…å°æ’åºå¤§å¹…é™ä½ï¼Œæ¯æ—¥è¨Šæ¯ä¸Šé™ 20 å‰‡ |
| 0-19 | é«˜åº¦å¯ç–‘ | é…å°ä¸æ¨è–¦ï¼Œåš´æ ¼è¨Šæ¯é™åˆ¶ |

**é è¨­åˆ†æ•¸**: 50ï¼ˆæ–°ç”¨æˆ¶è¨»å†Šæ™‚ï¼‰

---

## ğŸ“Š åˆ†æ•¸èª¿æ•´è¦å‰‡

### æ­£å‘è¡Œç‚ºï¼ˆåŠ åˆ†ï¼‰

| è¡Œç‚º | åˆ†æ•¸è®ŠåŒ– | è§¸ç™¼æ¢ä»¶ | å¯¦ä½œä½ç½® |
|------|----------|----------|----------|
| Email é©—è­‰å®Œæˆ | **+5** | é¦–æ¬¡é©—è­‰ Email æˆåŠŸ | `auth.py` verify_email |
| è¢«å–œæ­¡ | **+1** | å…¶ä»–ç”¨æˆ¶å–œæ­¡ä½  | `discovery.py` like_user |
| é…å°æˆåŠŸ | **+2** | é›™æ–¹äº’ç›¸å–œæ­¡ | `discovery.py` like_user |
| æ­£å‘äº’å‹•ï¼ˆé ç•™ï¼‰ | **+1** | æœªä¾†æ­£å¸¸äº’å‹•ä½¿ç”¨ | å°šæœªæ•´åˆ |

### è² å‘è¡Œç‚ºï¼ˆæ‰£åˆ†ï¼‰

| è¡Œç‚º | åˆ†æ•¸è®ŠåŒ– | è§¸ç™¼æ¢ä»¶ | å¯¦ä½œä½ç½® |
|------|----------|----------|----------|
| è¢«èˆ‰å ± | **-5** | å…¶ä»–ç”¨æˆ¶èˆ‰å ±ä½  | `safety.py` report_user |
| èˆ‰å ±è¢«ç¢ºèª | **-10** | ç®¡ç†å“¡ç¢ºèªèˆ‰å ±æˆç«‹ | `admin.py` review_report |
| ç™¼é€é•è¦å…§å®¹ | **-3** | è¨Šæ¯åŒ…å«æ•æ„Ÿè©/å¯ç–‘æ¨¡å¼ | `websocket.py` chat_endpoint |
| è¢«å°é– | **-2** | å…¶ä»–ç”¨æˆ¶å°é–ä½  | `safety.py` block_user |

---

## ğŸ”§ æŠ€è¡“å¯¦ä½œ

### æœå‹™å±¤è¨­è¨ˆ

**æª”æ¡ˆä½ç½®**: `backend/app/services/trust_score.py`

#### æ ¸å¿ƒæ–¹æ³•

```python
class TrustScoreService:
    # å¸¸æ•¸å®šç¾©
    MIN_SCORE = 0
    MAX_SCORE = 100
    DEFAULT_SCORE = 50
    RESTRICTION_THRESHOLD = 20
    LOW_TRUST_MESSAGE_LIMIT = 20

    # ä¸»è¦æ–¹æ³•
    async def adjust_score(db, user_id, action, reason=None) -> int
    async def get_score(db, user_id) -> int
    async def is_restricted(db, user_id) -> bool
    async def check_message_rate_limit(user_id, trust_score, redis) -> (bool, int)
    async def record_message_sent(user_id, redis) -> int
```

### èª¿ç”¨ç¯„ä¾‹

```python
# Email é©—è­‰åŠ åˆ†
await TrustScoreService.adjust_score(db, user.id, "email_verified")

# è¢«èˆ‰å ±æ‰£åˆ†
await TrustScoreService.adjust_score(db, reported_user_id, "reported")

# æª¢æŸ¥è¨Šæ¯é™åˆ¶
can_send, remaining = await TrustScoreService.check_message_rate_limit(
    user_id, trust_score, redis
)
```

---

## ğŸ² é…å°ç®—æ³•æ•´åˆ

### æ¬Šé‡åˆ†é…ï¼ˆç¸½åˆ† 100ï¼‰

| ç¶­åº¦ | æ¬Šé‡ | èªªæ˜ |
|------|------|------|
| èˆˆè¶£åŒ¹é… | 50 åˆ† | æ¯å€‹å…±åŒèˆˆè¶£ 10 åˆ† |
| è·é›¢ | 20 åˆ† | è¶Šè¿‘åˆ†æ•¸è¶Šé«˜ |
| æ´»èºåº¦ | 20 åˆ† | æœ€è¿‘æ´»èºåˆ†æ•¸è¶Šé«˜ |
| å®Œæ•´åº¦ | 5 åˆ† | ç…§ç‰‡æ•¸é‡ + è‡ªæˆ‘ä»‹ç´¹ |
| **ä¿¡ä»»åˆ†æ•¸** | **5 åˆ†** | **æ–°å¢ç¶­åº¦** |

### ä¿¡ä»»åˆ†æ•¸æ˜ å°„

```python
trust_score >= 70  â†’  5.0 åˆ†ï¼ˆé«˜åº¦ä¿¡ä»»ï¼‰
trust_score >= 50  â†’  4.0 åˆ†ï¼ˆæ­£å¸¸ï¼‰
trust_score >= 30  â†’  2.5 åˆ†ï¼ˆéœ€é—œæ³¨ï¼‰
trust_score >= 20  â†’  1.0 åˆ†ï¼ˆå—é™ï¼‰
trust_score < 20   â†’  0.0 åˆ†ï¼ˆé«˜åº¦å¯ç–‘ï¼‰
```

**å¯¦ä½œä½ç½®**: `backend/app/services/matching_service.py` `_calculate_trust_score_weight()`

---

## ğŸš« åŠŸèƒ½é™åˆ¶æ©Ÿåˆ¶

### è¨Šæ¯ç™¼é€é™åˆ¶

**è§¸ç™¼æ¢ä»¶**: `trust_score < 20`

**é™åˆ¶å…§å®¹**:
- æ¯æ—¥è¨Šæ¯ä¸Šé™ï¼š20 å‰‡
- è¨ˆæ•¸é‡ç½®ï¼šæ¯æ—¥åˆå¤œï¼ˆUTCï¼‰
- è¶…éé™åˆ¶ï¼šæ‹’çµ•ç™¼é€ä¸¦å›å‚³éŒ¯èª¤

**Redis Key è¨­è¨ˆ**:
```
trust:daily_messages:{user_id}:{YYYY-MM-DD}
TTL: 86400 ç§’ï¼ˆ24 å°æ™‚ï¼‰
```

**å¯¦ä½œä½ç½®**: `backend/app/api/websocket.py` `chat_endpoint()`

### æª¢æŸ¥æµç¨‹

```python
1. ç”¨æˆ¶ç™¼é€è¨Šæ¯
   â†“
2. æª¢æŸ¥ trust_score
   â†“
3. è‹¥ < 20ï¼ŒæŸ¥è©¢ Redis è¨ˆæ•¸
   â†“
4. è‹¥è¶…é 20 å‰‡ï¼Œæ‹’çµ•ç™¼é€
   â†“
5. è‹¥æœªè¶…éï¼Œå¢åŠ è¨ˆæ•¸ä¸¦å…è¨±ç™¼é€
```

---

## ğŸ§ª æ¸¬è©¦è¦†è“‹

### æ¸¬è©¦æª”æ¡ˆ

**ä½ç½®**: `backend/tests/test_trust_score.py`

### æ¸¬è©¦åˆ†é¡ï¼ˆ23 å€‹æ¸¬è©¦ï¼‰

```python
TestTrustScoreAdjustments (7 å€‹)
â”œâ”€ test_email_verified_increases_score
â”œâ”€ test_received_like_increases_score
â”œâ”€ test_match_created_increases_score
â”œâ”€ test_reported_decreases_score
â”œâ”€ test_report_confirmed_decreases_score
â”œâ”€ test_content_violation_decreases_score
â””â”€ test_blocked_decreases_score

TestScoreBoundaries (3 å€‹)
â”œâ”€ test_score_never_exceeds_max
â”œâ”€ test_score_never_below_min
â””â”€ test_invalid_action_raises_error

TestGetScore (2 å€‹)
â”œâ”€ test_get_score_returns_current_score
â””â”€ test_get_score_user_not_found

TestRestrictions (3 å€‹)
â”œâ”€ test_normal_user_not_restricted
â”œâ”€ test_low_trust_user_is_restricted
â””â”€ test_boundary_score_not_restricted

TestMessageRateLimiting (4 å€‹)
â”œâ”€ test_normal_user_no_limit
â”œâ”€ test_low_trust_user_has_limit
â”œâ”€ test_exceeded_limit_blocks_message
â””â”€ test_record_message_increments_counter

TestMultipleAdjustments (3 å€‹)
â”œâ”€ test_cumulative_positive_adjustments
â”œâ”€ test_cumulative_negative_adjustments
â””â”€ test_mixed_adjustments
```

### æ¸¬è©¦åŸ·è¡Œ

```bash
# åŸ·è¡Œæ‰€æœ‰ä¿¡ä»»åˆ†æ•¸æ¸¬è©¦
pytest tests/test_trust_score.py -v

# æ¸¬è©¦çµæœ
23 passed
```

---

## ğŸ“ æ•´åˆé»ç¸½è¦½

### API æ•´åˆä½ç½®

| API æ¨¡çµ„ | å‡½æ•¸ | è§¸ç™¼è¡Œç‚º |
|---------|------|---------|
| `auth.py` | `verify_email()` | Email é©—è­‰ +5 |
| `discovery.py` | `like_user()` | è¢«å–œæ­¡ +1, é…å° +2 |
| `safety.py` | `block_user()`, `report_user()` | è¢«å°é– -2, è¢«èˆ‰å ± -5 |
| `admin.py` | `review_report()` | èˆ‰å ±ç¢ºèª -10 |
| `websocket.py` | `chat_endpoint()` | é•è¦å…§å®¹ -3, é™åˆ¶æª¢æŸ¥ |

### æœå‹™å±¤ä¾è³´

```python
# TrustScoreService ä¾è³´
- SQLAlchemy AsyncSession (è³‡æ–™åº«æ“ä½œ)
- Redis Client (è¨Šæ¯è¨ˆæ•¸)
- User Model (åˆ†æ•¸æ¬„ä½)
```

---

## ğŸ”„ å·¥ä½œæµç¨‹ç¯„ä¾‹

### å ´æ™¯ 1ï¼šæ­£å¸¸ç”¨æˆ¶æˆé•·è·¯å¾‘

```
æ–°ç”¨æˆ¶è¨»å†Š
â”œâ”€ åˆå§‹åˆ†æ•¸: 50
â”œâ”€ Email é©—è­‰: +5 â†’ 55
â”œâ”€ è¢« 3 äººå–œæ­¡: +3 â†’ 58
â”œâ”€ é…å°æˆåŠŸ 2 æ¬¡: +4 â†’ 62
â””â”€ æœ€çµ‚åˆ†æ•¸: 62ï¼ˆæ­£å¸¸ç”¨æˆ¶ï¼‰
```

### å ´æ™¯ 2ï¼šé•è¦ç”¨æˆ¶é™ç´šè·¯å¾‘

```
æ­£å¸¸ç”¨æˆ¶
â”œâ”€ åˆå§‹åˆ†æ•¸: 50
â”œâ”€ ç™¼é€é•è¦å…§å®¹: -3 â†’ 47
â”œâ”€ è¢«èˆ‰å ± 2 æ¬¡: -10 â†’ 37
â”œâ”€ èˆ‰å ±è¢«ç¢ºèª: -10 â†’ 27
â””â”€ æœ€çµ‚åˆ†æ•¸: 27ï¼ˆéœ€é—œæ³¨ï¼‰
```

### å ´æ™¯ 3ï¼šåš´é‡é•è¦ç”¨æˆ¶

```
å•é¡Œç”¨æˆ¶
â”œâ”€ åˆå§‹åˆ†æ•¸: 50
â”œâ”€ è¢«èˆ‰å ± 3 æ¬¡: -15 â†’ 35
â”œâ”€ èˆ‰å ±ç¢ºèª 2 æ¬¡: -20 â†’ 15
â”œâ”€ è¢«å°é– 3 æ¬¡: -6 â†’ 9
â””â”€ æœ€çµ‚åˆ†æ•¸: 9ï¼ˆå—é™æ¨¡å¼ï¼‰
    â”œâ”€ é…å°æ’åºæ¥µä½
    â”œâ”€ æ¯æ—¥è¨Šæ¯ä¸Šé™ 20 å‰‡
    â””â”€ å»ºè­°ç®¡ç†å“¡å¯©æŸ¥
```

---

## ğŸ›¡ï¸ å®‰å…¨è€ƒé‡

### 1. ä¸¦ç™¼å®‰å…¨

æ‰€æœ‰åˆ†æ•¸èª¿æ•´ä½¿ç”¨è³‡æ–™åº«äº‹å‹™ä¿è­‰åŸå­æ€§ï¼š

```python
async def adjust_score(...):
    # æŸ¥è©¢ç”¨æˆ¶
    user = await db.execute(select(User).where(User.id == user_id))

    # è¨ˆç®—æ–°åˆ†æ•¸
    new_score = user.trust_score + adjustment

    # æ›´æ–°åˆ†æ•¸ï¼ˆäº‹å‹™ä¿è­‰ï¼‰
    user.trust_score = new_score
    await db.commit()  # åŸå­æ“ä½œ
```

### 2. åˆ†æ•¸é‚Šç•Œä¿è­·

```python
# ç¢ºä¿åˆ†æ•¸åœ¨ 0-100 ç¯„åœå…§
new_score = max(MIN_SCORE, min(MAX_SCORE, new_score))
```

### 3. Redis å¿«å–å¤±æ•—å›é€€

è¨Šæ¯é™åˆ¶åŠŸèƒ½åœ¨ Redis ç•°å¸¸æ™‚è‡ªå‹•å›é€€ï¼Œä¸å½±éŸ¿æ­£å¸¸ç”¨æˆ¶ï¼š

```python
try:
    # Redis æ“ä½œ
    ...
except Exception:
    # ç•°å¸¸æ™‚å…è¨±ç™¼é€ï¼ˆä¸é˜»æ“‹ç”¨æˆ¶ï¼‰
    return True, None
```

---

## ğŸ”® æœªä¾†æ“´å±•

### Phase 2: è‡ªå‹•æ¢å¾©æ©Ÿåˆ¶

- [ ] è‰¯å¥½è¡Œç‚ºè‡ªå‹•æ¢å¾©åˆ†æ•¸
- [ ] æ¯é€±/æ¯æœˆè‡ªå‹•å¢åŠ  1-2 åˆ†ï¼ˆé¼“å‹µæŒçºŒä½¿ç”¨ï¼‰
- [ ] èˆ‰å ±è¢«é§å›æ™‚æ¢å¾©è¢«æ‰£çš„åˆ†æ•¸

### Phase 3: æ­·å²è¿½è¹¤

- [ ] å»ºç«‹ `TrustScoreLog` æ¨¡å‹è¿½è¹¤æ‰€æœ‰åˆ†æ•¸è®ŠåŒ–
- [ ] ç®¡ç†å“¡å¯æŸ¥çœ‹ç”¨æˆ¶åˆ†æ•¸æ­·å²
- [ ] ç”¨æˆ¶å¯æŸ¥çœ‹è‡ªå·±çš„åˆ†æ•¸è®ŠåŒ–åŸå› 

### Phase 4: é€²éšé™åˆ¶

- [ ] ä½åˆ†ç”¨æˆ¶æ¯æ—¥å–œæ­¡æ¬¡æ•¸é™åˆ¶
- [ ] ä½åˆ†ç”¨æˆ¶ç…§ç‰‡ä¸Šå‚³éœ€å¯©æ ¸
- [ ] æ¥µä½åˆ†ï¼ˆ< 10ï¼‰è‡ªå‹•å°ç¦ 24 å°æ™‚

### Phase 5: æ©Ÿå™¨å­¸ç¿’

- [ ] ä½¿ç”¨ ML é æ¸¬æ½›åœ¨å•é¡Œç”¨æˆ¶
- [ ] ç•°å¸¸è¡Œç‚ºæ¨¡å¼æª¢æ¸¬
- [ ] è‡ªå‹•èª¿æ•´åˆ†æ•¸æ¬Šé‡

---

## ğŸ“š API åƒè€ƒ

### ç²å–ç”¨æˆ¶ä¿¡ä»»åˆ†æ•¸

```python
# ç®¡ç†å¾Œå°å¯æŸ¥çœ‹
GET /api/admin/users
Response: {
  "trust_score": 50,
  "warning_count": 0,
  ...
}
```

### ç®¡ç†å“¡æ‰‹å‹•èª¿æ•´ï¼ˆæœªå¯¦ä½œï¼‰

ç›®å‰åƒ…æ”¯æŒè‡ªå‹•èª¿æ•´ï¼Œç®¡ç†å“¡å¯é€éã€Œèˆ‰å ±å¯©æ ¸ã€é–“æ¥èª¿æ•´åˆ†æ•¸ã€‚

---

## ğŸ§® é…å°æ’åºå½±éŸ¿ç¯„ä¾‹

### ç¯„ä¾‹å€™é¸äººæ¯”è¼ƒ

**ç”¨æˆ¶ A** (é«˜ä¿¡ä»»åº¦)
```
èˆˆè¶£åŒ¹é…: 30 åˆ†ï¼ˆ3 å€‹å…±åŒèˆˆè¶£ï¼‰
è·é›¢: 15 åˆ†ï¼ˆ8 kmï¼‰
æ´»èºåº¦: 20 åˆ†ï¼ˆ1 å°æ™‚å‰ï¼‰
å®Œæ•´åº¦: 5 åˆ†ï¼ˆ6 å¼µç…§ç‰‡ + è‡ªä»‹ï¼‰
ä¿¡ä»»åˆ†æ•¸: 5 åˆ†ï¼ˆtrust_score = 75ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç¸½åˆ†: 75 åˆ†
```

**ç”¨æˆ¶ B** (ä½ä¿¡ä»»åº¦)
```
èˆˆè¶£åŒ¹é…: 30 åˆ†ï¼ˆ3 å€‹å…±åŒèˆˆè¶£ï¼‰
è·é›¢: 15 åˆ†ï¼ˆ8 kmï¼‰
æ´»èºåº¦: 20 åˆ†ï¼ˆ1 å°æ™‚å‰ï¼‰
å®Œæ•´åº¦: 5 åˆ†ï¼ˆ6 å¼µç…§ç‰‡ + è‡ªä»‹ï¼‰
ä¿¡ä»»åˆ†æ•¸: 0 åˆ†ï¼ˆtrust_score = 15ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç¸½åˆ†: 70 åˆ†
```

**çµæœ**: ç”¨æˆ¶ A æ’åºå„ªå…ˆæ–¼ç”¨æˆ¶ Bï¼ˆå³ä½¿å…¶ä»–æ¢ä»¶ç›¸åŒï¼‰

---

## ğŸ® ä½¿ç”¨è€…é«”é©—

### æ­£å¸¸ç”¨æˆ¶

- âœ… ç„¡ä»»ä½•é™åˆ¶
- âœ… é…å°æ’åºæ­£å¸¸
- âœ… ç„¡è¨Šæ¯æ•¸é‡é™åˆ¶

### ä½ä¿¡ä»»ç”¨æˆ¶ï¼ˆ< 20 åˆ†ï¼‰

- âš ï¸ é…å°æ’åºé™ä½ï¼ˆå¹¾ä¹ä¸è¢«æ¨è–¦ï¼‰
- âš ï¸ æ¯æ—¥è¨Šæ¯ä¸Šé™ 20 å‰‡
- âš ï¸ è¶…éé™åˆ¶æ™‚æ”¶åˆ°éŒ¯èª¤æç¤º

```json
// WebSocket éŒ¯èª¤å›æ‡‰
{
  "type": "error",
  "message": "è¨Šæ¯ç™¼é€é™åˆ¶ï¼šæ‚¨ä»Šæ—¥å·²é”ä¸Šé™ (20 å‰‡)"
}
```

---

## ğŸ§ª æ¸¬è©¦ç­–ç•¥

### å–®å…ƒæ¸¬è©¦

```bash
# åŸ·è¡Œæ¸¬è©¦
pytest tests/test_trust_score.py -v

# æ¸¬è©¦è¦†è“‹
- åˆ†æ•¸èª¿æ•´é‚è¼¯ï¼ˆæ­£å‘/è² å‘ï¼‰
- åˆ†æ•¸é‚Šç•Œä¿è­·ï¼ˆ0-100ï¼‰
- è¨Šæ¯é™åˆ¶æª¢æŸ¥
- å—é™ç‹€æ…‹åˆ¤æ–·
- å¤šæ¬¡ç´¯ç©èª¿æ•´
```

### æ•´åˆæ¸¬è©¦

é©—è­‰å„ API ç«¯é»è§¸ç™¼åˆ†æ•¸èª¿æ•´ï¼š

```bash
# Email é©—è­‰æ¸¬è©¦
pytest tests/test_auth.py::test_verify_email_success -v

# é…å°æ¸¬è©¦
pytest tests/test_discovery.py::test_mutual_like_creates_match -v

# èˆ‰å ±æ¸¬è©¦
pytest tests/test_safety.py::test_report_user_success -v
```

---

## ğŸ“ˆ ç›£æ§æŒ‡æ¨™

### å»ºè­°è¿½è¹¤çš„æŒ‡æ¨™

1. **åˆ†æ•¸åˆ†ä½ˆ**
   - å„åˆ†æ•¸æ®µç”¨æˆ¶æ•¸é‡
   - å¹³å‡åˆ†æ•¸
   - åˆ†æ•¸ä¸­ä½æ•¸

2. **é™åˆ¶å½±éŸ¿**
   - æ¯æ—¥å—é™ç”¨æˆ¶æ•¸é‡
   - è¢«é™åˆ¶è¨Šæ¯æ•¸é‡
   - é™åˆ¶å¾Œç”¨æˆ¶è¡Œç‚ºè®ŠåŒ–

3. **åˆ†æ•¸è®ŠåŒ–**
   - æ¯æ—¥ç¸½èª¿æ•´æ¬¡æ•¸
   - æ­£å‘èª¿æ•´ vs è² å‘èª¿æ•´æ¯”ä¾‹
   - å¹³å‡åˆ†æ•¸è®ŠåŒ–é€Ÿåº¦

---

## ğŸ” ç®¡ç†å“¡ä½¿ç”¨

### æŸ¥çœ‹ç”¨æˆ¶ä¿¡ä»»åˆ†æ•¸

```bash
# API ç«¯é»
GET /api/admin/users?search=user@example.com

# å›æ‡‰åŒ…å«
{
  "trust_score": 45,
  "warning_count": 2,
  "is_active": true,
  ...
}
```

### è™•ç†èˆ‰å ±å½±éŸ¿åˆ†æ•¸

```bash
# å¯©æ ¸èˆ‰å ±
POST /api/admin/reports/{report_id}/review
{
  "status": "APPROVED",  # ç¢ºèªèˆ‰å ±
  "action": "WARNING"
}

# è‡ªå‹•æ‰£åˆ†
è¢«èˆ‰å ±ç”¨æˆ¶ trust_score -= 10
```

---

## âš™ï¸ é…ç½®èˆ‡èª¿æ•´

### å¯èª¿æ•´åƒæ•¸

```python
# åœ¨ trust_score.py ä¸­ä¿®æ”¹

# åˆ†æ•¸ç¯„åœ
MIN_SCORE = 0           # æœ€ä½åˆ†æ•¸
MAX_SCORE = 100         # æœ€é«˜åˆ†æ•¸
DEFAULT_SCORE = 50      # æ–°ç”¨æˆ¶é è¨­

# é™åˆ¶é–¾å€¼
RESTRICTION_THRESHOLD = 20  # ä½æ–¼æ­¤åˆ†æ•¸é€²å…¥å—é™æ¨¡å¼

# è¨Šæ¯é™åˆ¶
LOW_TRUST_MESSAGE_LIMIT = 20  # ä½ä¿¡ä»»ç”¨æˆ¶æ¯æ—¥è¨Šæ¯ä¸Šé™

# åˆ†æ•¸èª¿æ•´å€¼
ADJUSTMENTS = {
    # æ­£å‘è¡Œç‚º
    "email_verified": +5,
    "received_like": +1,
    "match_created": +2,
    "positive_interaction": +1,  # é ç•™ï¼šæœªä¾†æ­£å¸¸äº’å‹•ä½¿ç”¨
    # è² å‘è¡Œç‚º
    "reported": -5,
    "report_confirmed": -10,
    "content_violation": -3,
    "blocked": -2,
}
```

---

## ğŸ› å·²çŸ¥é™åˆ¶

1. **ç„¡è‡ªå‹•æ¢å¾©æ©Ÿåˆ¶**
   - åˆ†æ•¸åªæœƒæ¸›å°‘ï¼Œä¸æœƒè‡ªå‹•æ¢å¾©
   - ç”¨æˆ¶éœ€é€éæ­£å‘è¡Œç‚ºæ‰‹å‹•æå‡

2. **ç„¡æ­·å²è¨˜éŒ„**
   - ä¸è¨˜éŒ„åˆ†æ•¸è®ŠåŒ–æ­·å²
   - ç„¡æ³•è¿½è¹¤å…·é«”æ‰£åˆ†åŸå› 

3. **å–®ä¸€é–¾å€¼**
   - åƒ…æœ‰ä¸€å€‹é™åˆ¶é–¾å€¼ï¼ˆ20 åˆ†ï¼‰
   - æœªä¾†å¯è€ƒæ…®å¤šç´šé™åˆ¶

---

## ğŸ“ ç¶­è­·æ—¥èªŒ

### 2025-12-25 - æ–‡æª”æ›´æ–°

- âœ… ç§»é™¤éæ™‚è¡Œè™Ÿå¼•ç”¨ï¼Œæ”¹ç”¨å‡½æ•¸åç¨±
- âœ… è£œå…… `positive_interaction` é ç•™æ¬„ä½èªªæ˜
- âœ… æ›´æ–°æ¸¬è©¦æ•¸é‡ 22 â†’ 23

### 2025-12-14 - é¦–æ¬¡å¯¦ä½œ

- âœ… å»ºç«‹ TrustScoreService
- âœ… æ•´åˆ 7 å€‹è¡Œç‚ºè§¸ç™¼é»
- âœ… é…å°ç®—æ³•æ¬Šé‡èª¿æ•´
- âœ… è¨Šæ¯é™åˆ¶åŠŸèƒ½
- âœ… 22 å€‹å–®å…ƒæ¸¬è©¦
- âœ… æ›´æ–° User æ¨¡å‹è¨»è§£

---

**æ–‡æª”ç‰ˆæœ¬**: 1.0.1
**ç¶­è­·è€…**: MergeMeet Development Team
**æœ€å¾Œæ›´æ–°**: 2025-12-25
