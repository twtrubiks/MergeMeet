# MergeMeet 功能清單

> 完整的功能開發記錄與詳細說明

## Week 1: 認證系統

- 用戶註冊（Email + 密碼）
- 用戶登入（JWT Token）
- Email 驗證（Mailpit 真實郵件發送）
- 密碼重置功能（忘記密碼 / 重設密碼）
- 登入失敗次數限制（5 次失敗後鎖定 15 分鐘，使用 Redis）
- 驗證碼暴力破解防護（5 次失敗後鎖定 15 分鐘）
- 密碼重置後全局 Token 失效（使用 Redis 記錄失效時間戳）
- Email 枚舉防護（統一錯誤訊息避免洩露用戶資訊）
- 驗證碼使用加密安全隨機數生成（secrets.choice）
- Token 刷新機制（支援 HttpOnly Cookie）
- 管理員登入（is_admin 權限檢查，Token 刷新後保留權限）

## Week 2: 個人檔案

- 個人資料管理（姓名、生日、性別、bio）
- 照片上傳（最多 6 張，含主照片，單檔限制 5MB）
- 照片審核申訴功能（被拒照片可提出申訴）
- 興趣標籤選擇（多選）
- 地理位置設定（經緯度）
- 配對偏好設定（年齡範圍、最大距離、性別偏好）
- 檔案上傳服務（圖片壓縮）

## Week 3: 探索與配對

- 探索頁面（Tinder 風格卡片）
- 用戶詳情查看（點擊卡片查看完整資料）
- 喜歡/跳過功能（滑動手勢）
- 雙向喜歡自動配對
- 配對演算法（5 維度：興趣 50 分 + 距離 20 分 + 活躍度 20 分 + 完整度 5 分 + 信任分數 5 分）
- 配對列表頁面
- 配對分數計算（0-100 分）

## Week 4: 即時聊天

- WebSocket 連接管理
- 即時訊息發送/接收
- 訊息內容審核與錯誤提示（敏感詞攔截、警告通知）
- 圖片/GIF 訊息（上傳、縮圖、預覽）
- 打字指示器（Typing Indicator）
- 已讀回條（Read Receipts）
- 聊天記錄分頁載入
- 對話列表（最後訊息預覽）
- 未讀訊息計數
- 訊息軟刪除
- 自動重連機制

## Week 5: 安全功能與管理後台

### 封鎖系統

- 封鎖/解除封鎖用戶
- 封鎖自動取消配對
- 封鎖列表頁面
- 被封鎖用戶不出現在探索頁面

### 舉報系統

- 5 種舉報類型（不當內容、騷擾、假帳號、詐騙、其他）
- 舉報原因必填（至少 10 字）
- 證據說明（選填）
- 舉報自動增加被舉報用戶警告次數
- 我的舉報記錄頁面（/my-reports，查看自己提交的所有舉報）

### 內容審核

- 敏感詞檢測（色情、詐騙、暴力、騷擾等）
- 可疑模式檢測（電話、URL、LINE ID、金額等）
- 自動過濾不當內容
- 違規自動增加警告次數
- 動態敏感詞管理

### 信任分數系統

- 自動分數調整（正向：Email 驗證 +5、被喜歡 +1、配對 +2）
- 自動分數懲罰（負向：被舉報 -5、違規內容 -3、被封鎖 -2）
- 配對算法整合（5 分權重，影響排序）
- 低信任用戶限制（< 20 分每日訊息上限 20 則）
- 分數範圍：0-100（預設 50）

### 管理後台

**統計儀表板**
- 用戶統計（總數、今日新增、活躍用戶）
- 配對統計（總配對數、配對率）
- 訊息統計（總訊息數、今日訊息）
- 舉報統計（待處理、已處理、總數）

**舉報管理**
- 查看所有舉報
- 舉報狀態篩選（待處理/審核中/已處理/已駁回）
- 舉報詳情查看（舉報人、被舉報人、原因、證據）
- 處理操作（批准、拒絕、警告、封禁用戶）

**用戶管理**
- 用戶列表
- Email 搜尋與狀態篩選（精準查找用戶）
- 封禁/解封用戶（支援設定封禁天數與原因）
- 查看用戶警告次數
- 查看用戶信任分數

## Week 6: 通知系統與 UI 優化

### 通知中心

- **通知中心頁面** (/notifications)
  - 完整通知歷史列表
  - 通知類型：新訊息、新配對、系統通知
  - 未讀/已讀狀態管理
  - 個別刪除通知功能
- **通知下拉選單**（導航欄鈴鐺圖標）
  - 顯示最近通知
  - 未讀數量角標
  - 快速跳轉至通知中心

### UI/UX 優化

- 配對偏好設定 UI（設定頁面）
  - 年齡範圍滑桿（18-99 歲）
  - 最大距離滑桿（1-500 公里）
  - 性別偏好選擇器（四種選項）
- 用戶詳情查看模態框（探索頁面）
- 照片審核申訴界面（被拒照片可申訴）
- 訊息內容審核錯誤提示（敏感詞攔截警告）

---

## 技術實現

### 後端

- FastAPI 異步框架
- SQLAlchemy 2.0 Async ORM
- JWT 認證 + Refresh Token
- Email 服務整合（Mailpit / SMTP）
- 密碼重置功能（Token 一次性使用、30分鐘有效期）
- WebSocket 即時通訊
- PostGIS 地理位置查詢
- Redis（Token 黑名單、驗證碼、登入限制）
- 內容審核系統
- 測試覆蓋率 >80%

### 前端

- Vue 3 Composition API
- Pinia 狀態管理
- Vue Router 路由守衛
- Axios 攔截器
- WebSocket Composable
- 響應式設計（RWD）
- 滑動手勢支援
- 載入狀態與錯誤處理

### DevOps

- Docker Compose（PostgreSQL + Redis + Mailpit）
- Mailpit Email 測試工具（開發環境）
- 自動化測試
- API 文檔自動生成（Swagger）
