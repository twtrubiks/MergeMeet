# 已知問題與技術債務

> 本文檔追蹤專案中的已知問題、技術債務和待解決事項。

---

## P0 - 阻塞性問題（上線前必須解決）

| ID | 問題 | 位置 | 工作量 | 影響 | 狀態 |
|----|------|------|--------|------|------|
| ~~P0-1~~ | ~~密碼重置功能缺失~~ | auth.py | 2-3 小時 | 用戶流失 | ✅ 已完成 |
| ~~P0-2~~ | ~~Email 服務未整合~~ | auth.py | 2-4 小時 | 假帳號氾濫 | ✅ 已完成 |
| ~~P0-3~~ | ~~登入失敗無限制~~ | auth.py | 1 小時 | 暴力破解風險 | ✅ 已完成 |
| P0-4 | 全局速率限制缺失 | main.py | 1 小時 | DoS 攻擊風險 | ❌ 待實作 |

**已完成 P0 項目（2025-12-12）**：
- ✅ P0-1: 密碼重置功能（3 個 API 端點 + 2 個前端頁面）
- ✅ P0-2: Email 服務整合（Mailpit + aiosmtplib + 美觀 HTML 模板）
- ✅ P0-3: 登入失敗次數限制（5 次失敗後鎖定 15 分鐘，使用 Redis）

---

## P1 - 高優先級（本週內處理）

| ID | 問題 | 工作量 | 狀態 |
|----|------|--------|------|
| P1-2 | 照片審核機制 | 4-8 小時 | ❌ 待實作 |
| P1-3 | 每日喜歡次數限制 | 2 小時 | ❌ 待實作 |
| ~~P1-4~~ | ~~圖片/GIF 訊息~~ | 4-6 小時 | ✅ 已完成 |
| P1-5 | WebSocket 單實例限制 | 1 週 | ❌ 待實作 |
| P1-6 | Match 表查詢效率 | 4 小時 | ❌ 待實作 |
| P1-7 | 監控與日誌系統 | 3-4 小時 | ❌ 待實作 |

**已完成 P1 項目**：
- ✅ P1-4: 圖片/GIF 訊息（上傳端點 + 縮圖 + WebSocket 傳輸 + UI 組件）

---

## 技術債務清單

| 項目 | 狀態 | 說明 |
|------|------|------|
| Redis 整合 | 🔄 部分使用 | 登入限制已使用 Redis，快取/Session 待實作 |
| Token 黑名單 | ❌ 使用內存 | 需改用 Redis |
| 內容審核快取 | ⚠️ 類變數 | 需改用 Redis |
| 驗證碼存儲 | ❌ 內存 | 需改用 Redis |
| 檔案儲存 | ⚠️ 本地模擬 | 需整合 AWS S3 |

---

## 上線準備度評估

### MVP 必備功能檢查表

| 分類 | 功能 | 狀態 | 阻塞性 |
|------|------|------|--------|
| **認證** | 註冊/登入 | ✅ 完成 | - |
| | 密碼重置 | ✅ 完成 | - |
| | Email 驗證 | ✅ 完成（Mailpit） | - |
| | 登入失敗限制 | ✅ 完成 | - |
| **個人檔案** | 建立檔案 | ✅ 完成 | - |
| | 上傳照片 | ✅ 完成 | - |
| | 地理位置自動定位 | ✅ 完成 | - |
| | 照片審核 | ❌ 缺失 | 是 |
| **配對** | 探索功能 | ✅ 完成 | - |
| | 配對演算法 | ✅ 完成 | - |
| **聊天** | 即時訊息 | ✅ 完成 | - |
| | WebSocket 安全認證 | ✅ 完成 | - |
| | 推播通知 | ✅ 完成 | - |
| **安全** | 封鎖/舉報 | ✅ 完成 | - |
| | 內容審核 | ✅ 完成 | - |

### 技術基礎設施

| 項目 | 狀態 |
|------|------|
| 資料庫遷移 | ✅ 完成 |
| API 文檔 | ✅ 完成 |
| 測試覆蓋率 | ✅ 80% |
| Docker 配置 | ✅ 完成 |
| 監控/日誌 | ❌ 缺失 |
| Rate Limiting | ❌ 缺失 |

**整體準備度**: 82%

---

最後更新：2025-12-23
