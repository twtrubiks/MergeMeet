# 技術路線圖

> 本文檔描述專案的開發規劃和里程碑。

---

## MVP 已完成功能

> 詳細功能清單請參閱 **[FEATURES.md](FEATURES.md)**

---

## Phase 2: 功能完善

**目標**: 提升用戶體驗和留存率

- [ ] 照片自動審核（AWS Rekognition / Google Vision）
- [ ] 每日喜歡次數限制（全域基礎限制）
- [ ] 整合 AWS S3 檔案儲存
- [ ] 全局速率限制（slowapi）
- [ ] IP 黑名單機制
- [ ] 安全 Header（CSP、HSTS、X-Frame-Options、X-Content-Type-Options）
- [ ] 檔案上傳安全掃描（病毒掃描）
- [ ] 通知系統整合
  - [ ] 推播通知（FCM）
  - [ ] Email 通知
  - [ ] SMS 通知

---

## Phase 3: 可擴展性

**目標**: 支援水平擴展和大規模用戶

- [ ] Redis WebSocket Pub/Sub（多實例支援）
- [ ] Redis 內容審核快取
- [ ] 優化 Match 表查詢（索引優化）
- [ ] CDN 配置（靜態資源）
- [ ] 監控和告警（Sentry, Prometheus）
- [ ] 資料庫讀寫分離

### 生產環境架構（規劃中）

```text
Internet
    │
    ▼
┌─────────────────┐
│   Cloudflare    │ (CDN + DDoS Protection)
│   (DNS/CDN)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│     Nginx       │ (反向代理 + SSL)
│  Load Balancer  │
└────────┬────────┘
         │
    ┌────┴─────┐
    │          │
    ▼          ▼
┌────────┐ ┌────────┐
│FastAPI │ │FastAPI │ (多個實例)
│Instance│ │Instance│
└────┬───┘ └────┬───┘
     │          │
     └────┬─────┘
          │
    ┌─────┴─────┐
    │           │
    ▼           ▼
┌──────────┐ ┌──────────┐
│PostgreSQL│ │  Redis   │
│ + PostGIS│ │  8.x     │
│  (主從)  │ │ (Cluster)│
└──────────┘ └──────────┘
```

---

## Phase 4: 變現功能

**目標**: 建立收入來源

- [ ] VIP 會員系統
- [ ] Super Like 功能
- [ ] Boost 曝光功能
- [ ] 查看誰喜歡我
- [ ] 回溯功能（Rewind）
- [ ] 金流整合（綠界、藍新）

---

## Phase 5: 認證與社交

**目標**: 增強用戶認證與社交互動

### 認證增強
- [ ] 社交媒體登入（Google、Facebook、Apple）
- [ ] 兩步驟驗證（2FA）
- [ ] 手機號碼驗證
- [ ] 實名制驗證（身份證、駕照）

### 社交功能
- [ ] 用戶動態（限時動態）
- [ ] 線下活動配對
- [ ] 群組聊天
- [ ] 語音訊息
- [ ] 視訊通話（WebRTC）

---

## Phase 6: 智能推薦

**目標**: 優化配對演算法與 AI 推薦

> 詳細演算法設計請參閱 **[MATCHING_ALGORITHM.md](MATCHING_ALGORITHM.md)**

- [ ] 新人加成（註冊 7 天內 +5 分）
- [ ] 調整興趣權重（50% → 45%）
- [ ] ELO 分數系統（魅力值）
- [ ] 回應率因素
- [ ] 協同過濾推薦
- [ ] A/B 測試框架
- [ ] AI 機器學習模型
- [ ] 個人化推薦演算法
- [ ] 配對成功率預測
- [ ] 行為分析優化

---

## Phase 7: 信任分數增強

**目標**: 完善信任分數機制

> 詳細設計請參閱 **[TRUST_SCORE_SYSTEM.md](TRUST_SCORE_SYSTEM.md)**

### 自動恢復機制
- [ ] 良好行為自動恢復分數
- [ ] 每週/每月自動增加 1-2 分（鼓勵持續使用）
- [ ] 舉報被駁回時恢復被扣的分數

### 歷史追蹤
- [ ] 建立 `TrustScoreLog` 模型追蹤所有分數變化
- [ ] 管理員可查看用戶分數歷史
- [ ] 用戶可查看自己的分數變化原因

### 進階限制
- [ ] 低分用戶每日喜歡次數額外限制
- [ ] 低分用戶照片上傳需審核
- [ ] 極低分（< 10）自動封禁 24 小時

### 機器學習
- [ ] 使用 ML 預測潛在問題用戶
- [ ] 異常行為模式檢測
- [ ] 自動調整分數權重

---

最後更新：2025-12-28
